<!DOCTYPE html>
<!-- saved from url=(0033)http://www.ganyuanfood.com/#page5 -->
<html>
   <head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>山西美食注册页面</title>
		<link rel="stylesheet" href="css/page.css">
		<script src="js/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
		<!-- header-->
		<script type="text/javascript" src="js/index.js"></script>
	</head>
	<body style="min-width:1340px">
	<div class="header">
		<div class="top">
			<div class="w1000">
				<div class="left l">欢迎来到山西美食网站</div>
				<div class="right r">
					<span><a href="">联系我们</a> </span>
					<span>|</span>
					<span><a href="https://www.meishichina.com">进入美食天下</a></span>
					<span>欢迎您的注册</span>
				</div>
			</div>
		</div>
		<div class="input">
			<div class="w1000">
			<form class="search" action="http://127.0.0.1:8080/quyu.html" method="post">
				<table class="t">
					<tr>
						<td align="left" width="1000px" valign="middle">
							<input class="stext" type="text" name="q" placeholder="请输入你喜欢的美食">	
								<input class="submit" type="submit" value="搜索">
						</td>
					</tr>
				</table>
			</form>
			</div>
		</div>
		<div class="menu">
			<div class="w1000">
				<div class="left logo ">
					<img src="imgs/logo.png" height="82px"><img src="imgs/logo.png" height="82px"><img src="imgs/logo.png" height="82px"></div>
				<div class="nav">
					<div id="navSelected" class="navSelected" style="left: 0px;"></div>
					<ul id="navBd">
						<li class="ov" id="navCurr">
							<span>
            		<a href="http://127.0.0.1:8080/index.html" >网站首页</a>
            	</span>
						</li>
						<li class="">
							<span>
            		<a href="" >走进美食</a>
            	</span>
						</li>
						<li class="">
							<span>
								<a href="./quyu.html" >区域美食</a>
							</span>
							<dl style="display: none;">
								<dd>
									<a href="" >太原</a>
								</dd>
								<dd>
									<a href="" >阳城</a>
								</dd>
								<dd>
									<a href="" >运城</a>
								</dd>
								<dd>
									<a href="" >闻喜</a>
								</dd>
								<dd>
									<a href="" >临汾</a>
								</dd>
								<dd>
									<a href="" >大同</a>
								</dd>
								<dd>
									<a href="">长治</a>
								</dd>
								<dd>
									<a href="" >忻州</a>
								</dd>
							</dl>
						</li>
						<li class="">
							<span>
								<a href="" >饮食健康</a>
							</span>
							<dl style="display: none;">
								<dd>
									<a href="" >健康饮食</a>
								</dd>
								<dd>
									<a href="">营养美食</a>
								</dd>
								<dd>
									<a href="" >健康美食</a>
								</dd>
							</dl>
						</li>
						<li class="">
						<span><a href="" >饮食文化</a></span>
							<dl style="display: none">
								<dd>
									<a href="" >美食历史</a>
								</dd>
								<dd>
									<a href="" >美食吃法</a>
								</dd>
								<dd>
									<a href="" >用餐规范</a>
								</dd>
							</dl>
						</li>
					<li class="">
					<span>
						<a href="" >联系我们</a>
					</span>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
<div class="youce">
			<ul>
				<li class="l1">
					<div class="img1">
						<ul>
							<li><img src="imgs/logo2.png"></li>
							<li class="t1"><a href="https://www.meishij.net/">点击访问美食杰</a></li>
						</ul>
					</div>
				</li>
				<li class="l2">
					<div class="img2">
						<ul>
							<li><img src="imgs/l02.png"/></li>
							<li class="t2"><img src="imgs/weixin.jpg" width="150px"></li>
						</ul>
					</div>
				</li>
				<li class="l3">
					<div class="img3">
						<ul>
							<li><img src="imgs/ll05.png"/></li>
							<li class="t3">点击访问微博</li>
						</ul>
					</div>
				</li>
			</ul>
</div>
<div class="main" style="background-image:url(./imgs/bj.jpg);height:820px;">
	<table></table>
	<div class="m_left">				
		<img src="./imgs/left.png"  alt="" >				
	</div>
	<p>欢迎进入山西美食，请您注册</p>
	<div class="input2">
		<table class="reg_t2">
			<tr>
				<td align="right" valign="bottom" style="font-size:20px">新用户注册</td>
				<td width="300px" valign="bottom" align="right"><a href="http://127.0.0.1:8080/user_login.html">直接登录</a></td>
				<td></td>
			</tr>
			<tr>
				<td align="right" width="110px">用户名：</td>
				<td><input onfocus="f1()" onblur="b1()" id="uname"	type="text" class="uname" placeholder="请输入用户名"></td>
				<td class="msg"><span id="uname_msg"></span></td>
			</tr>
			<tr>
				<td align="right">登录密码：</td>
				<td><input onfocus="f2()" onblur="b2()" id="upwd" type="password" class="upwd" placeholder="请输入密码"></td>
				<td class="msg"><span id="upwd_msg"></span></td>
			</tr>
			<tr>
				<td align="right">确认密码：</td>
				<td><input onfocus="f3()" onblur="b3()" id="cpwd" type="password" class="cpwd" placeholder="请确认密码">
				<td class="msg"><span id="cpwd_msg"></span></td>
				</td>
			</tr>
			<tr>
				<td align="right">邮箱：</td>
				<td><input onfocus="f4()" onblur="b4()" id="email" type="text" class="email" placeholder="请输入邮箱地址"></td>
				<td class="msg"><span id="email_msg"></span></td>
			</tr>
			<tr>
				<td align="right">手机号：</td>
				<td><input onfocus="f5()" onblur="b5()" id="phone"  type="text" class="phone" placeholder="请输入您的手机号"></td>
				<td class="msg"><span id="phone_msg"></span></td>
			</tr>
			<tr>
				<td></td>
				<td>
					<button id="btn" class="btn" onclick="reg()">提交注册信息</button>
				</td>
			</tr>
		</table>
	</div>
	<script>
		function dis(){
			btn.disabled=true;
		}
		function f1(){
			uname_msg.innerHTML="用户名的长度在6到9之间"
		}
		function f2(){
			upwd_msg.innerHTML="密码的长度在6到12位之间";
			//btn.disabled=true;
		}
		function f3(){
			cpwd_msg.innerHTML="密码的长度在6到12位之间"
		}
		function f4(){
			email_msg.innerHTML="请输入合法的邮箱地址"
		}
		function f5(){
			phone_msg.innerHTML="请输入合法的手机号"
		}
		function b1(){
			if(uname.value){
				if(uname.value.length>=6&&uname.value.length<=9){
					var u_uname=uname.value;
					//1.创建异步对象
					var xhr=new XMLHttpRequest();
					//4.监听接收响应数据
					xhr.onreadystatechange=function(){
					if(xhr.readyState==4&&xhr.status==200){
						var result=xhr.responseText;
						uname_msg.innerHTML=result;
						}
					}		
					//2.打开连接，创建请求
					xhr.open("get","http://127.0.0.1:8080/user/reg1?uname="+u_uname,true);
					//3.发送请求
					xhr.send();
				}else{
					uname_msg.innerHTML="用户名输入格式不正确"
				}
			}else{
				uname_msg.innerHTML="用户名不能为空"
			}
		}
		function b2(){
			if(upwd.value){
				if(upwd.value.length>=6&&upwd.value.length<=12){
					upwd_msg.innerHTML="密码格式正确";	
				}else{
					upwd_msg.innerHTML="密码输入格式不正确"
				}
			}else{
				upwd_msg.innerHTML="密码不能为空"
			}
		}
		function b3(){
			if(cpwd.value){
				if(cpwd.value.length>=6&&cpwd.value.length<=9){
					if(cpwd.value==upwd.value){
						cpwd_msg.innerHTML="两次输入的密码一致"
					}else{
						cpwd_msg.innerHTML="两次输入的密码不一致"
					}
				}else{
					cpwd_msg.innerHTML="密码输入格式不正确"
				}
			}else{
				cpwd_msg.innerHTML="密码不能为空"
			}
		}
		function b4(){
			if(email.value){
				if(email.value.lastIndexOf('@')>=0){
					var u_email=email.value;
					//1.创建异步对象
					var xhr=new XMLHttpRequest();
					//4.监听接收响应数据
					xhr.onreadystatechange=function(){
					if(xhr.readyState==4&&xhr.status==200){
						var result=xhr.responseText;
						email_msg.innerHTML=result;
						}
					}		
					//2.打开连接，创建请求
					xhr.open("get","http://127.0.0.1:8080/user/reg2?email="+u_email,true);
					//3.发送请求
					xhr.send();
				}else{
					email_msg.innerHTML="邮箱地址格式不正确"
				}
			}else{
				email_msg.innerHTML="邮箱地址不能为空"
			}
		}
		function b5(){
			if(phone.value){
				if(phone.value.length==11){
					var u_phone=phone.value;
					//1.创建异步对象
					var xhr=new XMLHttpRequest();
					//4.监听接收响应数据
					xhr.onreadystatechange=function(){
					if(xhr.readyState==4&&xhr.status==200){
						var result=xhr.responseText;
						phone_msg.innerHTML=result;
						}
					}		
					//2.打开连接，创建请求
					xhr.open("get","http://127.0.0.1:8080/user/reg3?phone="+u_phone,true);
					//3.发送请求
					xhr.send();
				}else{
					phone_msg.innerHTML="该手机号格式不正确"
				}
			}else{
				phone_msg.innerHTML="手机号不能为空"				
			}
			if(uname_msg.innerHTML=="该用户名可用"&&upwd_msg.innerHTML=="密码格式正确"&&cpwd_msg.innerHTML=="两次输入的密码一致"&&email_msg.innerHTML=="该邮箱地址可用"&&phone_msg.innerHTML=="请输入合法的手机号"){
				btn.disabled=false;
			}
		}
		function reg(){
			var u_uname=uname.value;
			var u_upwd=upwd.value;
			var u_email=email.value;
			var u_phone=phone.value;
			//1.创建异步对象
			var xhr=new XMLHttpRequest();
			//4.监听接收响应数据
			xhr.onreadystatechange=function(){
				if(xhr.readyState==4&&xhr.status==200){
					var result=xhr.responseText;
					//d1.innerHTML=result;
					alert(result);
					if(result=="注册成功")
					location.href="http://127.0.0.1:8080/user_login.html";
				}
			}		
			//2.打开连接，创建请求
			xhr.open("get","http://127.0.0.1:8080/user/reg?uname="+u_uname+"&upwd="+u_upwd+"&email="+u_email+"&phone="+u_phone,true);
			//3.发送请求
			xhr.send();
		}		
	</script>	
</div>
<div class="clear"></div>
   <div class="bottom">
		<div class="quan">
		<div class="text">
			<p align="center">版权所有：山西美食网&copy; 联系地址：北京市朝阳区</p>
		</div>
		<span class="right icoG">        	
	            		<ul>
	                		<li><a href="#" class="nav_item"><b class="ico b1"></b></a> </li>
	                		<li><a href="#" class="nav_item"><b class="ico b2"></b></a> </li>
	                	  <li><a href="#" class="nav_item"><b class="ico b4"></b></a> </li>
	            		</ul>
	        		</span>
		</div>
    </div>
</body>
</html>